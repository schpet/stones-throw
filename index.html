<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Stone's Throw</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="See tweets near you" />
    <link rel="stylesheet" href="css/style.min.css">
  </head>
  <body>
    <div class="nogeo">
      <div class="row-fluid">
        <div class="span12">
          <header class="jumbo">
            <h1>Stone's Throw</h1>
            <div class="description">
            <p>
              See tweets within a stone's throw.
            </p>
            <p>
              You need to let your browser track your physical location
              for this to work.
            </p>
            </div>
            <div class="privacy">
              <h3>Privacy</h3>
              <p>
                This page uses Google Maps and Google Analytics, they might
                keep track of your location.
              </p>
            </div>
          </header>


          <noscript style="color: red; font-weight: bold;" >
            This site doesn't work, at all, without javascript. Sorry.
          </noscript>
        </div>
      </div>
    </div>
    <div class="geo">
      <div class="map-container">
        <div class="container-fluid" >
          <div class="row-fluid">
            <div class="span5 pointer-events">
              <div id="map"></div>
              <div>
                <h3>Search Radius</h3>
                
                <span class="btn-group">
                  <button class="btn" id="radius-decrease">&ndash;</button>
                  <span class="btn" id="radius-feedback">- km</span>
                  <button class="btn" id="radius-increase">+</button>


                </span>
                <button class="btn" id="refresh">Update</button>
              </div>
              <div class="error">
                <span id="error"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="span5">
            <div class="hidden-phone">&nbsp;</div><!-- hacky -->
          </div>
          <div class="span7">
            <h3>Tweets near you <small>I bet they are weird</small></h3>
            <div id="tweets"></div>
            <h3>Tweets without location <small>but <span class="hidden-phone-inline">twitter thinks</span> they are nearby</small></h3>
            <div id="tweets-no-geo"></div>
          </div>
        </div>
      </div>
    </div>


    <script id="tweet" type="text/html">
      <li id="{{ id }}" class="tweet {{ handle }}">
        <div class="controls">

          <div class="avatar">
            <a href="javascript:;" class="avatar-link" data-tweetid="{{ id }}">
              <img src="{{ avatarSmall }}" />
            </a>
          </div>

        </div>
        <div class="text">
          <a href="http://twitter.com/{{ handle }}" target="_blank">@{{ handle }}</a>
          <a href="#" class="mute" handle="{{ handle }}">mute</a>
          <div class="content">
            {{{ text }}}
          </div>
          <div class="tweet-meta">
          {{ time }} 
          {{#location}}
            <a href="javascript:;" class="maplink" lat="{{ lat }}" lon="{{ lon }}" tweetid="{{ id }}" title="See this tweet on a map">
              {{ distance }} km away</a>
          {{/location}}
          </div>
        </div>

        <div class="modal hide" id="popup-{{ id }}">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">Ã—</button>
            <h3>
              <a href="http://twitter.com/{{ handle }}" target="_blank">
                @{{ handle }}
              </a>
            </h3>
          </div>
          <div class="modal-body">
            <img src="{{ avatarFull }}" />
            <p>{{{ text }}}</p>
            <a href="{{ permalink }}" target="_blank">view on twitter</a>
          </div>
        </div>

      </li>
    </script>

    <script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=false"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <!-- TODO combine and minify -->
    <script type="text/javascript" src="js/pretty.js"></script>
    <script type="text/javascript" src="js/twitter-text.js"></script>
    <script type="text/javascript" src="js/latlon.js"></script>
    <script type="text/javascript" src="js/ICanHaz.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-modal.js"></script>
    <script type="text/javascript" src="js/app.js"></script>

    <script type="text/javascript">
    var _gaq=[['_setAccount','UA-24600517-1'],['_trackPageview']]; 
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
  </body>
</html>
